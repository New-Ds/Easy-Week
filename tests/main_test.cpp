#include <QtTest/QtTest>
#include <QApplication>
#include "easyweekunittests.h"

/**
 * @brief Главная функция для запуска unit-тестов EasyWeek
 * 
 * Запускает все тест-кейсы согласно стратегии тестирования:
 * ТК-001, ТК-002, ТК-003, ТК-004, ТК-005
 */
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    
    // Настройка тестового окружения
    app.setApplicationName("EasyWeek Unit Tests");
    app.setApplicationVersion("1.0");
    
    qDebug() << "=================================================";
    qDebug() << "     ЗАПУСК UNIT-ТЕСТОВ EASYWEEK v1.0";
    qDebug() << "=================================================";
    qDebug() << "Покрытие тест-кейсов:";
    qDebug() << "• ТК-001: Регистрация и авторизация пользователей";
    qDebug() << "• ТК-002: Добавление продуктов с валидацией";
    qDebug() << "• ТК-003: Генерация меню с расчетом БЖУ";
    qDebug() << "• ТК-004: Обновление карточек меню";
    qDebug() << "• ТК-005: Экспорт меню в файл";
    qDebug() << "=================================================";
    
    // Создание и запуск тестового объекта
    EasyWeekUnitTests tests;
    
    // Запуск всех тестов
    int result = QTest::qExec(&tests, argc, argv);
    
    // Вывод результатов
    qDebug() << "=================================================";
    if (result == 0) {
        qDebug() << "     ✅ ВСЕ ТЕСТЫ ПРОЙДЕНЫ УСПЕШНО!";
        qDebug() << "     Система готова к использованию.";
    } else {
        qDebug() << "     ❌ ОБНАРУЖЕНЫ ОШИБКИ В ТЕСТАХ!";
        qDebug() << "     Требуется исправление перед релизом.";
    }
    qDebug() << "=================================================";
    
    return result;
}